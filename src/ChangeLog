2002-04-02  David N. Welton  <davidw@dedasys.com>

	* quickref.xsl: <arg choice="plain"> now outputs monoseq text, to
	indicate when an argument must be inserted literally, as a
	subcommand.

2002-03-28  David N. Welton  <davidw@dedasys.com>

	* generic/interpool.c (initPool): Removed 'called' - it can only
	happen once.  Thanks to Ronnie.

2002-03-27  David N. Welton  <davidw@dedasys.com>

	* generic/interpool.c (initPool): Remove locking, as this is
	called from the child_init area, which shouldn't be
	multi-threaded.  Thanks to Ronnie for pointing this out.

2002-03-21  David N. Welton  <davidw@dedasys.com>

	* quickref.xml: Changed documentation for web::log, which now
	defaults to not running 'subst' on its arguments.

2002-03-19  David N. Welton  <davidw@dedasys.com>

	* generic/mod_websh.c (merge_websh_config): Don't reset the locks
	here.

	* generic/log.c (destroyLogPlugIn): Send something to stderr if
	there is no plugin.

2002-03-18  David N. Welton  <davidw@dedasys.com>

	* apachetests: Added new, modularized test system.  Should allow
	easier sharing of improvements across Apache Tcl projects.

2002-03-11  David N. Welton  <davidw@dedasys.com>

	* quickref.xml: changed <...> to <option>...</option.

2002-03-08  David N. Welton  <davidw@dedasys.com>

	* quickref.xsl: Added our own custom .xsl file for Tcl style
	output.

2002-03-07  David N. Welton  <davidw@dedasys.com>

	* generic/logtocmd.c (logToCmd): Use a real list instead of a
	DString.

	* tests/cmdurl.test (getquerystringfromurl): Changed tests to use
	getquerystringfromurl instead of web::querystring::getfromurl.

	* generic/interpool.c (initPool): Make sure we are only called
	once.

	* generic/querystring.c: delete Web_GetQueryStringFromUrl
	function/command.

	* unix/Makefile.in: Avoid the final link step if it's already been
	performed, for websh, and mod_websh.so.

2002-03-05  David N. Welton  <davidw@dedasys.com>

	* generic/request.c (removeTempFiles): Log error on failure of
	'remove'.

	* generic/paramlist.c (paramGetIndexFromObj): stopgap fix to make
	sure we don't overflow.
	(paramGet): 'default' in switch statement returns error, but we
	should never arrive there.

	* generic/mod_websh.c (websh_init_child): Create Apache log entry
	if initPool doesn't return an OK.

	* generic/modwebsh_ap.c (Web_InterpClassCfg): Pass mtime to
	createWebInterpClass after fetching it with Tcl_Stat.

	* generic/interpool.c (createWebInterp): Fixed fixme - log error
	to Apache.
	(poolGetWebInterp): Switched to request_rec.request_time.
	(createWebInterp): Use request_rec.request_time, and also add
	request_rec as a parameter to createWebInterp.
	(createWebInterp): Log readWebInterpCode failure via Apache.
	(destroyWebInterp): Log web::finalize errors to Apache logs.

2002-02-27  David N. Welton  <davidw@dedasys.com>

	* unix/configure.in: Changed version to 3.5.

	* generic/request.c (createRequestData): Removed
	handleToSpecificReqData here and elsewhere - it's handled in other
	ways (through set/get assocdata).

	* generic/mod_websh.c: We *don't* check for files' existance,
	because they might be mapped with interpmap, and might not even
	really exist.

	* generic/interpool.c (poolGetWebInterp): Use Tcl_Stat instead of
	'file mstat' called with Tcl_Eval to get mtime.

	* apachetests/template.conf.tcl: Change port to 8081, instead of
	8080, because some people already use that for a test server.

	* apachetests/runtests.tcl: We no longer start the server
	automatically.

	* Added headers.ws3 and headers.test files, to be used for header
	testing.

	* apachetests/mod_websh.test (server::start): Created
	server::start and server::stop commands for use in tests.

2002-02-19  David N. Welton  <davidw@dedasys.com>

	* tests/webout.test: Removed test for {= tags.

	* generic/mod_websh.c (exit_websh_pool): Added this as a
	registered cleanup.

	* generic/mod_websh.c (websh_handler): Do correct checks for
	Apache2.

2002-02-14  David N. Welton  <davidw@dedasys.com>

	* generic/weboutint.c (webout_eval_tag): Workaround to avoid
	printing headers if the very first thing in putx is an opening
	tag, starting a block of Tcl code.

2002-02-12  David N. Welton  <davidw@dedasys.com>

	* generic/url.c (Web_CmdUrlCfg): Change to use two variables for
	'scheme' - one as a config, and one to hold the actual value.

2002-02-05  David N. Welton  <davidw@dedasys.com>

	* websh.spec: Fix-ups to make websh.spec work better - generates
	RPM's now on my system.

	* unix/Makefile.in (install-doc): Moved install doc to be near
	  other 'install' targets.  Make install-doc use DESTDIR instead
	  of prefix variable.

2001-12-28  David N. Welton  <davidw@dedasys.com>

	* generic/uricode.c (uriDecode): Fixed comparisons to work with
	'char *' instead of specifying signed/unsigned.

2001-12-12  David N. Welton  <davidw@dedasys.com>

	* generic/webout.c (Web_Response): Add web::response -select
	default to get set channel for both web and CGI.

	* generic/request.h: Add requestGetDefaultOutChannelName.

	* tests/webout.test: Add test for web::response -select default.

2001-12-03  David N. Welton  <davidw@dedasys.com>

	* generic/cfg.c (Web_Cfg): Create a "web::config reset" command,
	which resets cmdurltimestamp, uploadfilesize, timeparam and
	cmdparam.

	* generic/request.c (resetRequestData): #if out resetting of
	variables configured via web::config.

2001-11-30  David N. Welton  <davidw@dedasys.com>

	* webshinspect.ws3 (web): Added -path to filecontext.

	* filecontext.tests: Added -path elements to filecontexts.

	* generic/sessctx.ws3: Make -join a mandatory argument for filecontext.

	* generic/mod_websh.c: move initPool to Child Init function.

2001-11-23  David N. Welton  <davidw@dedasys.com>

	* generic/tcldecmt.tcl: Add newlines/newline quoting backslashes
	to mirror the script in Tcl's initScript.

	* generic/cfg.c (Web_Cfg): cmdUrlTimestamp changes.

2001-11-22  David N. Welton  <davidw@dedasys.com>

	* generic/url.c (createUrlData): First cut at making cmdurl scheme
	bswitch between https and http depending on environmental variables.

	* tests/dispatch.test: Changes necessary here to correctly handle
	errors that are now propogated from web::dispatch.

	* generic/dispatch.c (Web_Dispatch): Propogate errors from
	parsePostData.

	* cfg.c: Added CMDURLTIMESTAMP as a global option that may be
	configured with web::config.

	* unix/configure.in: Added debugging flags.

	* generic/request_ap.c (requestFillRequestValues): Make
	requestFillRequestValues return TCL_ERROR instead of NULL.

	* generic/context.tcl: Added 'delete' proc for contexts.

	* Added apachetests directory.

	* generic/log.c (createLogData): Change logSubst to default to 0
	(off).

2001-11-07  David N. Welton  <davidw@dedasys.com>

	* generic/uricode.c (uriDecode): changed 'utf' to be a signed
	character, so that the comparison with 0 works on all
	architectures.

	* generic/tcldecmt.tcl: Extend functionality to do multiple files,
	and properly quote \ and " characters for use in a C string.

	* unix/Makefile.in: Replaced shell commands with more
	functionality in tcldecmt.tcl script.

2001-11-05  David N. Welton  <davidw@dedasys.com>

	* unix/configure.in: Moved to this directory from src/.

2001-03-14  Simon Hefti <simon.hefti@netcetera.ch>
	
	* webutl.c: fixed setting global var for web::response command
	* web::response error messages improved
	* quickref updated
	* web::dehtmlify bug fix

2001-01-21  Simon Hefti <simon.hefti@netcetera.ch>

	* sessctx.ws3 supports web::init 1 -create
	  which creates the session file, if it does not exists yet,
	  whithout throwing an error. Also, allow capitals in
	  session id's.

	* varchannel.c: let Tcl handle the global variables, especially
	  when ref counter > 0, Also, suppress error message which
	  Tcl leavs in the interp if a channel does not exist yet,
	  if we could create it successfully.

	* filecontext.test:  test "valid id" checker, and "-create" option
	  of filecontext

	* webout.test: test channel switching

	* args.c: new function argdbg to write out arguments

	* cookie.ws3: new init prototype requires additional,
	  optional argument (-create). Added, even thouh it is unused here.

	* log.c: better check of valid options in web::logdest

2001-01-01  Simon Hefti <simon.hefti@netcetera.ch>

	* used -DTCL_MEM_DEBUG to find the last memory leaks. 2 found amd
 	fixed. A lot of "potentially leaked" (as indicated by purify)
 	disappear if test suite is run in a seperate interp
	(using interp create) and interp is deleted afterwards. In other
 	words: this is housekeeping data that is properly freed when the
 	interp is destroyed.

	* parsing of multipart/formdata: more indicative log messages
 	hinting to the prominent boundary problem (a boundary with lots of
 	dashes makes it easy to overlook the first two).

	* varchannel: solved encoding problem by using Tcl_GetByteArray
 	instead of Tcl_GetString

	* web::dispatch tests: since bad postdata do not throw errors any
 	longer (websh tries to answer the request even in case of bad
 	postdata) we had to rewrite the tests which checked those
 	errors. log entry is checked now instead.
	

2000-11-14  Simon Hefti <simon.hefti@netcetera.ch>

	3.0b3 release

	This is a test release - some stuff needs to be finished.
	Particularly: search for potential memory leaks, and Windows
	stuff.

	The API is final. mod_websh builds and runs on Linux and Solaris
	using apach 1.3.x.

2000-04-27  Simon Hefti <simon.hefti@netcetera.ch>

	3.0b2 beta-2 release of webshell 3

	The Apache Module added - is known to build and run
	on SunOs-5.6 and on Linux.

	Several minor bug fixes - at Netcetera, this webshell is in
	productive use since beta-1.

2000-03-20  Simon Hefti <simon.hefti@netcetera.ch>

	3.0b1 beta-1 release of webshell 3

	This release is known to compile and run on SunOs-5.5.1 and Linux
 	and should do so on most UNIX variants.

	The Apache Module is missing in this release.

2000-03-07  Simon Hefti <simon.hefti@netcetera.ch>

	3.0a1 alpha-1 release of webshell 3

	first release

	This release is known to compile and run on SunOs-5.5.1.
	A couple of tests of the test suite are marked as "empty" and
 	skipped.
	The session management module is missing in this release.
	The Apache Module is missing in this release.
	